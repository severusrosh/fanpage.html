<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Justin Bieber ‚Ä¢ Belieber Central (Research‚ÄëDriven Fan Page)</title>
  <meta name="description" content="A research‚Äëdriven Justin Bieber fanpage focused on engagement, community, accessibility, and trust ‚Äî built with vanilla HTML, CSS & JS." />
  <style>
    /* =====================================================
       DESIGN: Mobile‚Äëfirst, accessible, high contrast friendly
       ===================================================== */
    :root{
      --bg: #0b1220;          /* background */
      --panel: #111827;       /* cards */
      --text: #e5e7eb;        /* base text */
      --muted: #9ca3af;       /* secondary */
      --brand: #f59e0b;       /* amber */
      --brand-2: #06b6d4;     /* cyan */
      --accent: #8b5cf6;      /* violet */
      --ok: #10b981;          /* green */
      --warn: #f97316;        /* orange */
      --danger: #ef4444;      /* red */
      --ring: 0 0 0 3px rgba(6,182,212,.25);
      --radius: 18px;
      --shadow: 0 10px 30px -10px rgba(0,0,0,.6);
    }
    [data-theme="light"]{
      --bg:#fafafa; --panel:#ffffff; --text:#0f172a; --muted:#475569;
      --shadow: 0 10px 30px -10px rgba(2,6,23,.15);
    }
    [data-contrast="high"]{ --bg:#000; --panel:#000; --text:#fff; --muted:#d1d5db; }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; color:var(--text); background:
        radial-gradient(1400px 700px at 10% -10%, rgba(139,92,246,.2), transparent 55%),
        radial-gradient(1200px 800px at 110% -30%, rgba(6,182,212,.18), transparent 60%),
        var(--bg);
      font: 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      scroll-behavior:smooth;
    }
    a{ color:inherit }
    img{ max-width:100%; height:auto; display:block }
    .container{ width:min(1100px,92vw); margin-inline:auto }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
    .skip-link{ position:absolute; left:8px; top:-40px; background:#000; color:#fff; padding:.5rem .75rem; border-radius:10px }
    .skip-link:focus{ top:8px }

    /* Top bar */
    .nav{ position:sticky; top:0; z-index:60; backdrop-filter:saturate(180%) blur(10px);
      background: color-mix(in hsl, var(--bg) 85%, transparent);
      border-bottom:1px solid rgba(148,163,184,.18);
    }
    .nav-inner{ display:flex; align-items:center; justify-content:space-between; padding:.6rem 0 }
    .brand{ display:flex; align-items:center; gap:.6rem; font-weight:900; letter-spacing:.2px }
    .logo{ width:32px; height:32px; border-radius:50%; background:conic-gradient(from 210deg, var(--brand), var(--brand-2), var(--accent)) }
    .nav ul{ list-style:none; display:flex; gap:.6rem; margin:0; padding:0 }
    .nav a{ padding:.4rem .7rem; border-radius:999px }
    .nav a.active, .nav a:hover{ background:rgba(255,255,255,.08) }
    .toolbar{ display:flex; gap:.4rem; align-items:center }

    /* Buttons */
    .btn{ display:inline-flex; align-items:center; gap:.5rem; padding:.65rem 1rem; border-radius:999px;
      border:1px solid rgba(148,163,184,.2); background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#0b0f19;
      font-weight:800; letter-spacing:.2px; box-shadow:var(--shadow); cursor:pointer }
    .btn.ghost{ background:transparent; color:var(--text) }
    .btn.small{ padding:.45rem .7rem; font-weight:700 }

    /* Hero */
    .hero{ padding:80px 0 54px }
    .grid{ display:grid; gap:1rem; grid-template-columns: 1fr }
    .hero h1{ font-size: clamp(2rem, 6vw, 3.2rem); line-height:1.1; font-weight:900; letter-spacing:-.02em }
    .muted{ color:var(--muted) }
    .pill{ display:inline-block; font-size:.75rem; padding:.25rem .5rem; border-radius:999px; background:rgba(6,182,212,.2); border:1px solid rgba(6,182,212,.4) }
    .panel{ background:var(--panel); border:1px solid rgba(148,163,184,.2); border-radius:var(--radius); box-shadow:var(--shadow); padding:1rem }

    /* Sections */
    section{ padding:54px 0 }
    .section-title{ font-size: clamp(1.35rem, 4vw, 2rem); font-weight:900; margin:0 0 .5rem }
    .section-sub{ margin:0 0 1rem; color:var(--muted) }

    /* Cards */
    .card{ border:1px solid rgba(148,163,184,.18); border-radius:16px; overflow:hidden; background:var(--panel); box-shadow:var(--shadow) }
    .card .content{ padding:1rem }

    /* Media grid */
    .cols-3{ grid-template-columns: repeat(3, 1fr) }
    @media (min-width:900px){ .grid.hero-grid{ grid-template-columns: 1.2fr 1fr } .cols-3{ grid-template-columns: repeat(3, 1fr) } }

    /* Carousel */
    .carousel{ position:relative }
    .rail{ display:flex; gap:1rem; overflow:auto; scroll-snap-type:x mandatory; padding-bottom:.5rem }
    .rail::-webkit-scrollbar{ height:10px }
    .rail::-webkit-scrollbar-thumb{ background:rgba(148,163,184,.35); border-radius:999px }
    .album{ min-width:220px; scroll-snap-align:start; background:var(--panel); border:1px solid rgba(148,163,184,.18); border-radius:16px; overflow:hidden }
    .album-cover{ aspect-ratio:1/1; display:grid; place-items:center; font-weight:900; font-size:1rem; background: linear-gradient(135deg, rgba(245,158,11,.25), rgba(139,92,246,.25)) }
    .carousel button{ position:absolute; top:40%; transform:translateY(-50%); background:#0b0f19; color:var(--text); border:1px solid rgba(255,255,255,.1); border-radius:999px; padding:.6rem }
    .carousel .prev{ left:-.5rem } .carousel .next{ right:-.5rem }

    /* Masonry */
    .masonry{ column-count: 2; column-gap: 1rem }
    .masonry img{ width:100%; border-radius:14px; margin:0 0 1rem; break-inside: avoid; border:1px solid rgba(148,163,184,.18) }
    @media (min-width:900px){ .masonry{ column-count:3 } }

    /* Timeline */
    .timeline{ position:relative; padding-left:1rem }
    .timeline::before{ content:""; position:absolute; left:0; top:.25rem; bottom:.25rem; width:3px; background:linear-gradient(var(--brand), var(--accent)); border-radius:6px }
    .time-item{ margin:.75rem 0 .75rem 1rem; padding:.75rem 1rem; background:var(--panel); border:1px solid rgba(148,163,184,.18); border-radius:14px }

    /* Community */
    .post{ display:grid; gap:.5rem; margin:.5rem 0; padding:.75rem; border:1px solid rgba(148,163,184,.18); border-radius:12px; background:rgba(255,255,255,.02) }
    .badge{ display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .55rem; border-radius:999px; border:1px solid rgba(148,163,184,.25) }

    /* Forms */
    form{ display:grid; gap:.6rem }
    input, textarea, select{ padding:.75rem 1rem; background:var(--panel); color:var(--text); border-radius:12px; border:1px solid rgba(148,163,184,.25) }
    input:focus, textarea:focus, select:focus{ outline:none; box-shadow:var(--ring); border-color:var(--brand-2) }
    .hint{ font-size:.85rem; color:var(--muted) }

    /* Footer */
    footer{ padding:40px 0 80px; color:var(--muted); text-align:center }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important }
    }
  </style>
</head>
<header id="hero">
    <img src="images/justin-hero.jpg" alt="Justin Bieber performing on stage" />
    <h1>Welcome to the Ultimate Justin Bieber Fanpage</h1>
  </header>  
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <nav class="nav" aria-label="Top">
    <div class="container nav-inner">
      <div class="brand"><span class="logo" aria-hidden="true"></span><a href="#home">JB Fanpage</a></div>
      <ul>
        <li><a href="#news">News</a></li>
        <li><a href="#music">Music</a></li>
        <li><a href="#discography">Discography</a></li>
        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#timeline">Timeline</a></li>
        <li><a href="#community">Community</a></li>
        <li><a href="#about">About</a></li>
      </ul>
      <div class="toolbar">
        <button id="themeBtn" class="btn small ghost" title="Toggle theme" aria-pressed="false">üåì</button>
        <button id="contrastBtn" class="btn small ghost" title="Toggle high contrast" aria-pressed="false">‚óë</button>
        <button id="profileBtn" class="btn small ghost" title="Your profile & badges">‚≠ê</button>
      </div>
    </div>
  </nav>

  <header id="home" class="hero">
    <div class="container grid hero-grid">
      <div>
        <span class="pill" id="lastUpdated">Last updated: ‚Äî</span>
        <h1>Justin Bieber
          <span class="muted"><br>Research‚Äëdriven fan hub</span>
        </h1>
        <p class="muted">Built around what studies show fans love: fresh updates, interactivity, community belonging, mobile usability, and trust & safety.</p>
        <div style="display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem">
          <a class="btn" href="https://www.youtube.com/watch?v=fRh_vgS2dFE" target="_blank" rel="noopener">‚ñ∂Ô∏è Listen Now</a>
          <a class="btn ghost" href="#community">Join the community</a>
        </div>
      </div>
      <div class="panel" aria-label="Stats & Badges">
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem">
          <div class="card"><div class="content"><strong>Your Badge</strong><div id="badgeCurrent" class="badge" style="margin-top:.4rem">üéß New Fan</div><div class="hint">Earn points by posting, voting, and acing the quiz.</div></div></div>
          <div class="card"><div class="content"><strong>Points</strong><div id="points" style="font-size:1.6rem; font-weight:900; margin-top:.25rem">0</div><div class="hint">Local to your device.</div></div></div>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- NEWS (Timely updates / curated) -->
    <section id="news" class="container">
      <h2 class="section-title">News & Updates</h2>
      <p class="section-sub">Curated highlights. Replace the sample items with real updates when you host this.</p>
      <div id="newsList" class="grid cols-3"></div>
      <div style="margin-top:.6rem; display:flex; gap:.5rem; flex-wrap:wrap">
        <button class="btn small" id="shareSite">Share this site</button>
        <span class="hint">Sharing helps the community grow.</span>
      </div>
    </section>

    <!-- MUSIC (Multimedia variety) -->
    <section id="music" class="container">
      <h2 class="section-title">Top Tracks</h2>
      <p class="section-sub">A starter pack of bops. Swap in official embeds you love.</p>
      <div class="grid cols-3">
        <article class="card"><div class="content"><span class="pill">Video</span><h3>Sorry</h3></div>
          <iframe width="100%" height="220" src="https://www.youtube.com/embed/fRh_vgS2dFE" title="Justin Bieber - Sorry" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </article>
        <article class="card"><div class="content"><span class="pill">Video</span><h3>Love Yourself</h3></div>
          <iframe width="100%" height="220" src="https://www.youtube.com/embed/oyEuk8j8imI" title="Justin Bieber - Love Yourself" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </article>
        <article class="card"><div class="content"><span class="pill">Video</span><h3>Peaches</h3></div>
          <iframe width="100%" height="220" src="https://www.youtube.com/embed/tQ0yjYUFKAE" title="Justin Bieber - Peaches" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </article>
      </div>
      <div class="panel" style="margin-top:1rem">
        <h3 style="margin:0 0 .35rem">Belieber Quiz</h3>
        <p class="hint">Interactive fun (engagement). Score high to earn points!</p>
        <div id="quiz" class="grid">
          <div>
            <p><strong>1)</strong> Which album includes ‚ÄúSorry‚Äù?</p>
            <label><input type="radio" name="q1" value="Believe"> Believe</label>
            <label><input type="radio" name="q1" value="Purpose"> Purpose</label>
            <label><input type="radio" name="q1" value="Changes"> Changes</label>
          </div>
          <div>
            <p><strong>2)</strong> What year did ‚ÄúMy World 2.0‚Äù release?</p>
            <label><input type="radio" name="q2" value="2009"> 2009</label>
            <label><input type="radio" name="q2" value="2010"> 2010</label>
            <label><input type="radio" name="q2" value="2012"> 2012</label>
          </div>
          <div>
            <p><strong>3)</strong> Finish the lyric: ‚ÄúIs it too late now to say ____?‚Äù</p>
            <label><input type="radio" name="q3" value="Sorry"> Sorry</label>
            <label><input type="radio" name="q3" value="Maybe"> Maybe</label>
            <label><input type="radio" name="q3" value="Please"> Please</label>
          </div>
        </div>
        <button id="quizBtn" class="btn small">Check score</button>
        <div id="quizResult" class="hint" aria-live="polite"></div>
      </div>
    </section>

    <!-- DISCOGRAPHY (carousel) -->
    <section id="discography" class="container">
      <h2 class="section-title">Discography</h2>
      <p class="section-sub">Swipe the carousel or use arrow buttons/keyboard (accessibility).</p>
      <div class="carousel">
        <button class="prev" aria-label="scroll left">‚Üê</button>
        <div class="rail" id="albumRail" tabindex="0" aria-label="Album carousel">
          <article class="album"><div class="album-cover">My World 2.0</div><div class="content"><h4>2010</h4><p class="muted">‚ÄúBaby‚Äù, ‚ÄúSomebody to Love‚Äù</p></div></article>
          <article class="album"><div class="album-cover">Believe</div><div class="content"><h4>2012</h4><p class="muted">‚ÄúBoyfriend‚Äù, ‚ÄúAs Long As You Love Me‚Äù</p></div></article>
          <article class="album"><div class="album-cover">Purpose</div><div class="content"><h4>2015</h4><p class="muted">‚ÄúSorry‚Äù, ‚ÄúLove Yourself‚Äù</p></div></article>
          <article class="album"><div class="album-cover">Changes</div><div class="content"><h4>2020</h4><p class="muted">‚ÄúYummy‚Äù, ‚ÄúIntentions‚Äù</p></div></article>
          <article class="album"><div class="album-cover">Justice</div><div class="content"><h4>2021</h4><p class="muted">‚ÄúPeaches‚Äù, ‚ÄúHold On‚Äù</p></div></article>
          <article class="album"><div class="album-cover">Next Era</div><div class="content"><h4>‚Äî</h4><p class="muted">Stay tuned ‚ú®</p></div></article>
        </div>
        <button class="next" aria-label="scroll right">‚Üí</button>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="gallery" class="container">
      <h2 class="section-title">Gallery</h2>
      <p class="section-sub">User‚Äëfriendly, alt‚Äëtexted images. Replace placeholders with real tour shots.</p>
      <div class="masonry">
        <img src="https://picsum.photos/600/800?random=1" alt="Concert lights and crowd" loading="lazy">
        <img src="https://picsum.photos/600/500?random=2" alt="Microphone on a lit stage" loading="lazy">
        <img src="https://picsum.photos/600/700?random=3" alt="Fans holding signs" loading="lazy">
        <img src="https://picsum.photos/600/600?random=4" alt="Spotlight through haze" loading="lazy">
        <img src="https://picsum.photos/600/900?random=5" alt="Backstage corridor" loading="lazy">
        <img src="https://picsum.photos/600/650?random=6" alt="Tour bus parked at venue" loading="lazy">
      </div>
    </section>

    <!-- TIMELINE (emotional narrative) -->
    <section id="timeline" class="container">
      <h2 class="section-title">Milestones</h2>
      <div class="timeline">
        <div class="time-item"><h4>2008 ‚Äî YouTube discovery</h4><p class="muted">Spotted online, signed soon after.</p></div>
        <div class="time-item"><h4>2010 ‚Äî First #1 album</h4><p class="muted">‚ÄúMy World 2.0‚Äù tops global charts.</p></div>
        <div class="time-item"><h4>2015 ‚Äî Purpose era</h4><p class="muted">Run of massive singles and a world tour.</p></div>
        <div class="time-item"><h4>2021 ‚Äî Justice</h4><p class="muted">More hits, collaborations, and awards.</p></div>
      </div>
    </section>

    <!-- COMMUNITY (belonging, UGC, gamification) -->
    <section id="community" class="container">
      <h2 class="section-title">Community</h2>
      <p class="section-sub">Post a message, share fan art, vote in polls. Be kind ‚Äî see <a href="#about">guidelines</a>.</p>

      <div class="grid cols-3">
        <!-- Guestbook -->
        <div class="panel">
          <h3 style="margin-top:0">Guestbook</h3>
          <form id="guestForm" aria-label="Guestbook form">
            <input id="guestName" name="name" placeholder="Display name" maxlength="30" required aria-label="Your name">
            <textarea id="guestMsg" name="message" rows="3" placeholder="Say something nice‚Ä¶" maxlength="200" required aria-label="Your message"></textarea>
            <button class="btn small" type="submit">Post</button>
            <div class="hint">No spam, hate, or personal info. Messages are stored locally on your device.</div>
          </form>
          <div id="guestStream" aria-live="polite" style="margin-top:.75rem"></div>
        </div>

        <!-- Poll -->
        <div class="panel">
          <h3 style="margin-top:0">Poll: Favorite Era</h3>
          <form id="pollForm">
            <label><input type="radio" name="era" value="My World"> My World</label>
            <label><input type="radio" name="era" value="Believe"> Believe</label>
            <label><input type="radio" name="era" value="Purpose"> Purpose</label>
            <label><input type="radio" name="era" value="Changes"> Changes</label>
            <label><input type="radio" name="era" value="Justice"> Justice</label>
            <button class="btn small" type="submit">Vote</button>
          </form>
          <div class="hint" id="pollThanks" style="display:none">Thanks for voting! Your tally lives on this device.</div>
          <div style="margin-top:1rem">
            <div class="hint">Live tally (local)</div>
            <div class="card"><div class="content">
              <div style="display:grid; gap:.5rem">
                <div><small>Purpose</small><div class="bar" style="height:10px; background:rgba(148,163,184,.25); border-radius:999px; overflow:hidden"><span id="barPurpose" style="display:block; height:100%; background:linear-gradient(90deg, var(--brand), var(--accent)); width:0%"></span></div></div>
              </div>
            </div></div>
          </div>
        </div>

        <!-- Fan Art Upload (client‚Äëside only) -->
        <div class="panel">
          <h3 style="margin-top:0">Share Fan Art (preview only)</h3>
          <form id="artForm">
            <input type="file" id="artFile" accept="image/*" aria-label="Upload image">
            <button class="btn small" type="submit">Preview</button>
            <div class="hint">No files leave your device. Max 3 MB. Offensive content not allowed.</div>
          </form>
          <div id="artPreview" style="margin-top:.75rem"></div>
        </div>
      </div>
    </section>

    <!-- ABOUT / TRUST & SAFETY -->
    <section id="about" class="container">
      <h2 class="section-title">About This Fanpage</h2>
      <div class="grid cols-3">
        <div class="panel"><h3 style="margin-top:0">Design principles</h3>
          <ul>
            <li>Fresh, curated content (News).</li>
            <li>Interactivity (Quiz, Poll, Guestbook).</li>
            <li>Community belonging (badges, highlights).</li>
            <li>Usability & accessibility (mobile, alt text, keyboard support).</li>
            <li>Trust & safety (guidelines, privacy first).</li>
          </ul>
        </div>
        <div class="panel"><h3 style="margin-top:0">Community guidelines</h3>
          <ul>
            <li>Be kind. No harassment or hate speech.</li>
            <li>No spam or scams. No personal contact info.</li>
            <li>Keep posts PG‚Äë13. Mods may remove content.</li>
          </ul>
          <small class="hint">This prototype stores data only in your browser (localStorage). Nothing is uploaded.</small>
        </div>
        <div class="panel"><h3 style="margin-top:0">Privacy & consent</h3>
          <p class="muted">We minimize data collection and explain how your data is used. In this demo, content is local‚Äëonly. For a live site, add a privacy policy and cookie consent.</p>
          <button id="privacyBtn" class="btn small ghost">View privacy note</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="container">
    <p>Made with ‚ù§Ô∏è by Beliebers ¬∑ Vanilla HTML/CSS/JS ¬∑ <a href="#home">Back to top</a></p>
  </footer>

  <!-- Privacy modal -->
  <dialog id="privacyModal" aria-labelledby="privacyTitle">
    <form method="dialog" class="panel" style="max-width:700px">
      <h3 id="privacyTitle" style="margin-top:0">Privacy Note</h3>
      <p class="muted">This prototype stores your posts, votes, and points in <strong>localStorage</strong> only. No tracking, no cookies, no server. If you clear your browser data, your content disappears. For production, add a transparent privacy policy and consent banner.</p>
      <div style="display:flex; gap:.5rem; justify-content:flex-end"><button class="btn small">Close</button></div>
    </form>
  </dialog>

  <!-- Profile modal -->
  <dialog id="profileModal" aria-labelledby="profileTitle">
    <form method="dialog" class="panel" style="max-width:720px">
      <h3 id="profileTitle" style="margin-top:0">Your Profile & Badges</h3>
      <p class="muted">Points are earned by positive actions (posting, voting, quiz). All device‚Äëlocal.</p>
      <ul>
        <li>üéß <strong>New Fan</strong>: 0‚Äì19 points</li>
        <li>‚ú® <strong>Belieber</strong>: 20‚Äì49 points</li>
        <li>üöÄ <strong>Superfan</strong>: 50+ points</li>
      </ul>
      <div style="display:flex; gap:.5rem; justify-content:flex-end"><button class="btn small">Close</button></div>
    </form>
  </dialog>

  <script>
    /* =====================================================
       UTILITIES / STATE
       ===================================================== */
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const store = {
      get: (k, fallback) => { try{ return JSON.parse(localStorage.getItem(k)) ?? fallback } catch{ return fallback }},
      set: (k, v) => localStorage.setItem(k, JSON.stringify(v))
    };
    const addPoints = (n=1) => {
      const pts = store.get('points', 0) + n; store.set('points', pts); updatePointsUI();
    };
    const badgeFor = (pts) => pts>=50? 'üöÄ Superfan' : pts>=20? '‚ú® Belieber' : 'üéß New Fan';
    const updatePointsUI = () => {
      const pts = store.get('points', 0); $('#points').textContent = pts; $('#badgeCurrent').textContent = badgeFor(pts);
    };

    // Theme & contrast
    const applyTheme = () => document.documentElement.setAttribute('data-theme', store.get('theme','dark'));
    const applyContrast = () => document.documentElement.setAttribute('data-contrast', store.get('contrast','normal'));
    applyTheme(); applyContrast();
    $('#themeBtn').addEventListener('click', e=>{ const next = store.get('theme','dark')==='light'?'dark':'light'; store.set('theme',next); applyTheme(); e.currentTarget.setAttribute('aria-pressed', next==='light'); });
    $('#contrastBtn').addEventListener('click', e=>{ const next = store.get('contrast','normal')==='high'?'normal':'high'; store.set('contrast', next); applyContrast(); e.currentTarget.setAttribute('aria-pressed', next==='high'); });

    // Modals
    $('#privacyBtn').addEventListener('click', ()=> $('#privacyModal').showModal());
    $('#profileBtn').addEventListener('click', ()=> $('#profileModal').showModal());

    // Active nav on scroll
    const navLinks = $$('.nav a[href^="#"]').filter(a=>a.getAttribute('href')!=='#home');
    const sections = navLinks.map(a=> document.querySelector(a.getAttribute('href')));
    const io = new IntersectionObserver((entries)=>{
      for(const e of entries){ if(e.isIntersecting){ navLinks.forEach(l=> l.classList.toggle('active', l.getAttribute('href') === '#' + e.target.id)); } }
    }, { rootMargin:'-55% 0px -45% 0px', threshold: 0 });
    sections.forEach(s=> s && io.observe(s));

    // Last updated (today)
    const today = new Date();
    $('#lastUpdated').textContent = 'Last updated: ' + today.toLocaleDateString(undefined, { year:'numeric', month:'short', day:'2-digit' });

    /* =====================================================
       NEWS (curated sample items, newest first)
       ===================================================== */
    const news = [
      { title:'New collab teased', date:'2024-11-28', summary:'JB hints at a studio session on socials.', tag:'Rumor' },
      { title:'Justice Tour highlights reel drops', date:'2023-06-15', summary:'A heartfelt montage from the last run.', tag:'Video' },
      { title:'Milestone: 70M monthly listeners', date:'2021-04-05', summary:'Streaming records and counting.', tag:'Milestone' }
    ];
    news.sort((a,b)=> new Date(b.date) - new Date(a.date));
    const newsList = $('#newsList');
    news.forEach(n=>{
      const card = document.createElement('article'); card.className='card';
      card.innerHTML = `<div class="content">
        <span class="pill">${n.tag}</span>
        <h3 style="margin:.35rem 0 0">${n.title}</h3>
        <div class="hint">${new Date(n.date).toLocaleDateString(undefined,{year:'numeric', month:'short', day:'2-digit'})}</div>
        <p class="muted">${n.summary}</p>
      </div>`;
      newsList.appendChild(card);
    });

    // Web Share (growth)
    $('#shareSite').addEventListener('click', async ()=>{
      try{
        if(navigator.share){ await navigator.share({ title:'Belieber Central', text:'Join this JB fan hub!', url:location.href }); addPoints(2);} else { alert('Copy the URL and share with friends üíú'); }
      }catch{}
    });

    /* =====================================================
       QUIZ (engagement + gamification)
       ===================================================== */
    const quizAnswers = { q1:'Purpose', q2:'2010', q3:'Sorry' };
    $('#quizBtn').addEventListener('click', ()=>{
      let score=0; const r=name=> (document.querySelector(`input[name="${name}"]:checked`)||{}).value;
      if(r('q1')===quizAnswers.q1) score++; if(r('q2')===quizAnswers.q2) score++; if(r('q3')===quizAnswers.q3) score++;
      $('#quizResult').textContent = `You scored ${score}/3 ${score===3? '‚Äî Legendary! ‚ú®': score===2? '‚Äî Nice!': '‚Äî Keep streaming!'} `;
      addPoints(score); // reward
    });

    /* =====================================================
       CAROUSEL (keyboard accessible)
       ===================================================== */
    const rail = $('#albumRail');
    $('.carousel .prev').addEventListener('click', ()=> rail.scrollBy({left:-260, behavior:'smooth'}));
    $('.carousel .next').addEventListener('click', ()=> rail.scrollBy({left: 260, behavior:'smooth'}));
    rail.addEventListener('keydown', e=>{ if(e.key==='ArrowRight') rail.scrollBy({left:220, behavior:'smooth'}); if(e.key==='ArrowLeft') rail.scrollBy({left:-220, behavior:'smooth'}); });

    /* =====================================================
       COMMUNITY ‚Äî Guestbook (device‚Äëlocal, light moderation)
       ===================================================== */
    const badWords = ['damn','hell','stupid','idiot']; // placeholder list ‚Äî replace with a better filter server‚Äëside
    const sanitize = (s)=> s.replace(/[<>]/g, '').trim();
    const safe = (s)=> {
      const low = s.toLowerCase();
      return !badWords.some(w=> low.includes(w));
    };
    const postsKey = 'jb-posts';
    const renderPosts = ()=>{
      const posts = store.get(postsKey, []); const wrap = $('#guestStream'); wrap.innerHTML='';
      if(!posts.length){ wrap.innerHTML = '<p class="hint">No posts yet. Be the first! üéâ</p>'; return; }
      for(const p of posts){ const el = document.createElement('div'); el.className='post'; el.innerHTML = `<strong>${p.name}</strong><span class="muted">${new Date(p.ts).toLocaleString()}</span><div>${p.msg}</div>`; wrap.prepend(el); }
    };
    $('#guestForm').addEventListener('submit', e=>{
      e.preventDefault(); const name = sanitize($('#guestName').value); const msg = sanitize($('#guestMsg').value);
      if(!safe(msg)){ alert('Please keep it kind and respectful.'); return; }
      if(name && msg){ const posts = store.get(postsKey, []); posts.push({ name, msg, ts: Date.now() }); store.set(postsKey, posts); e.target.reset(); renderPosts(); addPoints(5); }
    });
    renderPosts();

    /* =====================================================
       COMMUNITY ‚Äî Poll (device‚Äëlocal)
       ===================================================== */
    const pollKey = 'jb-poll'; const bar = $('#barPurpose'); const tally = store.get(pollKey, {});
    const updateBar = ()=>{ const total = Object.values(tally).reduce((a,b)=>a+b,0)||1; const width = Math.round(((tally['Purpose']||0)/total)*100); bar.style.width = width+'%'; bar.parentElement.setAttribute('aria-label', `Purpose ${width}%`); };
    updateBar();
    $('#pollForm').addEventListener('submit', e=>{ e.preventDefault(); const fd = new FormData(e.target); const choice = fd.get('era'); if(!choice) return; tally[choice] = (tally[choice]||0)+1; store.set(pollKey, tally); $('#pollThanks').style.display='block'; updateBar(); addPoints(2); });

    /* =====================================================
       COMMUNITY ‚Äî Fan Art (client‚Äëside preview only)
       ===================================================== */
    $('#artForm').addEventListener('submit', e=>{ e.preventDefault(); const f = $('#artFile').files[0]; if(!f) return; if(!f.type.startsWith('image/')){ alert('Please select an image file.'); return; } if(f.size>3*1024*1024){ alert('Image too large (max 3 MB).'); return; }
      const img = document.createElement('img'); img.alt = 'Fan art preview'; img.loading='lazy';
      const reader = new FileReader(); reader.onload = ()=>{ img.src = reader.result; $('#artPreview').innerHTML = ''; $('#artPreview').appendChild(img); addPoints(3); }; reader.readAsDataURL(f);
    });

    /* =====================================================
       INIT POINTS/BADGES
       ===================================================== */
    updatePointsUI();
  </script>
  <!-- Concert Map Section -->
<section id="concert-map-section">
    <h2>Next Concert Location</h2>
    <input type="text" id="venue-input" placeholder="Enter concert venue" />
    <button id="show-map-btn">Show on Map</button>
    <div id="map" style="width: 100%; height: 400px; margin-top: 1rem;"></div>
  </section>
  
  <script>
    let map;
    let marker;
  
    // Predefined list of upcoming Justin Bieber concerts
    const concerts = [
      { venue: "Madison Square Garden, New York, USA", date: "2025-09-30" },
      { venue: "Staples Center, Los Angeles, USA", date: "2025-10-05" },
      { venue: "O2 Arena, London, UK", date: "2025-10-12" }
    ];
  
    // Find the next concert
    function getNextConcert() {
      const today = new Date();
      for (const concert of concerts) {
        const concertDate = new Date(concert.date);
        if (concertDate >= today) return concert;
      }
      return concerts[0]; // fallback
    }
  
    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 20.0, lng: 0.0 },
        zoom: 2,
      });
  
      // Automatically show next concert
      const nextConcert = getNextConcert();
      document.getElementById("venue-input").value = nextConcert.venue;
      showVenueOnMap(nextConcert.venue);
    }
  
    function showVenueOnMap(venue) {
      const geocoder = new google.maps.Geocoder();
  
      geocoder.geocode({ address: venue }, (results, status) => {
        if (status === "OK") {
          const location = results[0].geometry.location;
          map.setCenter(location);
          map.setZoom(14);
  
          if (marker) marker.setMap(null); // remove old marker
          marker = new google.maps.Marker({
            map: map,
            position: location,
            title: venue
          });
        } else {
          alert("Geocode was not successful: " + status);
        }
      });
    }
  
    document.getElementById("show-map-btn").addEventListener("click", () => {
      const venue = document.getElementById("venue-input").value;
      if (!venue) return alert("Please enter a venue!");
      showVenueOnMap(venue);
    });
  </script>
  
  <!-- Google Maps API script: replace YOUR_API_KEY with your actual key -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
  </script>
<section id="other-fanpages">
    <h2>Other Fanpages</h2>
    <ul id="fanpage-list">
      <!-- Fanpages will be dynamically populated -->
    </ul>
  </section>
  
  <script>
    // Sample list of fanpage feeds (can be JSON or RSS)
    const fanpages = [
      { name: "BieberDaily", url: "https://bieberdaily.com/feed.json" },
      { name: "BieberUpdates", url: "https://bieberupdates.net/api/posts" },
      { name: "BieberFans", url: "https://bieberfans.org/feed.json" }
    ];
  
    const fanpageList = document.getElementById("fanpage-list");
  
    fanpages.forEach(page => {
      // Fetch example JSON feed
      fetch(page.url)
        .then(res => res.json())
        .then(data => {
          const li = document.createElement("li");
          li.innerHTML = `<a href="${page.url}" target="_blank">${page.name}</a> - Latest post: ${data.latestPost || "No posts yet"}`;
          fanpageList.appendChild(li);
        })
        .catch(err => {
          const li = document.createElement("li");
          li.innerHTML = `<a href="${page.url}" target="_blank">${page.name}</a> - Could not load feed`;
          fanpageList.appendChild(li);
          console.error("Failed to fetch feed:", err);
        });
    });
  </script>
    
</body>
</html>


  